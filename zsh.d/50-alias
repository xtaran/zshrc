# -*- sh -*-
################
# abe's .alias #
################

# Former \!* using tcsh aliases have been converted to functions

### DEBUG ###
#set -x

# One character aliases
alias	c=cat
#unfunction d
alias   d='dirs -v'
alias	g=git
alias   l=less
alias	m=mutt
alias	o='$PAGER'
alias	q=exit
alias	t=touch
alias	z=zile

# Two character aliases
alias	 eg='egrep --color=auto'
function ff() { find . -name "$@" }
alias	 gr='fgrep --color=auto'
alias	 qu='quota -v'
alias	 tn=telnet
function df() { command df -TP "$@" | column -t }

alias	mx="nslookup -sil -q=mx"
alias	ns="nslookup -sil -q=ns"

alias	ls='ls -F --color=auto'
alias	la='ls -AF'
alias	ll='ls -AlF'

alias	uc='perl -Mlocale -pe "\$_=uc(\$_);"'
alias	lc='perl -Mlocale -pe "\$_=lc(\$_);"'

alias	ec=emacsclient

if alias md > /dev/null; then unalias md; fi
function md { mkdir -p "$@" && cd "$@" }

# Three character aliases
alias	acs='apt-cache show'
alias	acp='apt-cache policy'
alias	acd='apt-cache depends'
alias	acr='apt-cache rdepends'
alias	ac/='apt-cache search'
alias	acn='apt-cache search -n'
alias	af/='apt-file search'
alias	afs='apt-file search'
alias	afl='apt-file list'
alias	afu='apt-file update'
alias	ag/='aptitude search'
alias	agi='aptitude install'
alias	ag+='aptitude install'
alias	ag-='aptitude remove'
alias	agr='aptitude remove'
alias	ag_='aptitude purge'
alias	agp='aptitude purge'
alias	agu='aptitude update'
alias	agh='aptitude hold'
alias	agc='apt-get clean'
alias	agw='aptitude why'
alias	'a-u'='aptitude -u'
alias	asv='apt-show-versions'
alias   ack=ack-grep
function ffi() { find . -iname "$@" }
function lpr() { command lpr "$@"; lpq }
alias	cls=clear # Yeah, that's from DOS
alias   ecn='emacsclient -n'
alias   ecc='emacsclient -c'
alias   ino='inotail -f'
alias	nsl=nslookup
alias	ooo=openoffice
alias	OOo=openoffice

function asc() {
    # Set the title to something more obvious, e.g. the expanded
    # alias, eh, function
    print -Pn "\e]0;%n@%m: autossh -t $* 'screen -RdU'\a";

    # For the following hack for getting ssh-agent to work inside the
    # reattached screen session, see
    # http://samrowe.com/wordpress/ssh-agent-and-gnu-screen/ and
    # http://www.stderr.nl/Blog/Software/Mutt/MuttRemoteAttachments.html?seemore=y
    autossh -x -A -t "$@" 'test -x ~/.mutt/bin/setup-ssh-screen && exec ~/.mutt/bin/setup-ssh-screen || exec screen -RdU'
}
compdef asc=ssh

# Four character aliases
function assh() {
    # Set the title to something more obvious, e.g. the expanded
    # alias, eh, function
    print -Pn "\e]0;%n@%m: autossh $*\a";
    autossh "$@"
}
compdef assh=ssh

alias	root='ssh root@localhost'
alias	acss='apt-cache showsrc'
alias	agsu='aptitude safe-upgrade'
alias	agdu='aptitude full-upgrade'
alias	agma='aptitude markauto'
alias	agri='aptitude reinstall'
alias	aguh='aptitude unhold'
alias	agbd='aptitude build-dep'
alias	agwn='aptitude why-not'
alias	ccal='ccal -e'
alias	eccn='emacsclient -c -n'

# Five character aliases
alias    agrep=ack-grep
alias    cgrep='ack-grep --passthru'
alias	 deurl='$HOME/bin/url_decode.pl'
function perlv()	{ perl -le "use $1; print "'$'"$1"'::VERSION;' }
alias	 acsrc='apt-cache showsrc'
alias	 aguma='aptitude unmarkauto'
function mount() {
    if [[ $# -eq 0 ]]; then
	command mount | column -t
    else
	command mount "$@"
    fi
}

# noglob aliasses
alias	mmv='noglob mmv'
alias	wget='noglob wget'
alias	find='noglob find'
alias	clive='noglob clive'
alias	clivescan='noglob clivescan'
alias	'youtube-dl'='noglob youtube-dl'
alias	translate='noglob translate'
alias	links='noglob links'
alias	links2='noglob links2'
alias	xlinks2='noglob xlinks2'
alias	lynx='noglob lynx'

# Compose key errors
alias	ÃŸh=ssh

# ls sorting (Idea from zsh book)
alias lsbig=ls -lhSr
alias lssmall=ls -lhS
alias lsnew=ls -lhtr
alias lsold=ls -lht

# grep with color by default
alias	grep='grep --color=auto'
alias	fgrep='fgrep --color=auto'
alias	egrep='egrep --color=auto'

# OpenSSL
for i in sha512 sha256 sha1 md5; do
	ssl-cert-$i() { openssl x509 -noout -fingerprint -$i -in $1 }
done

ssl-cert-fingerprints() {
	for i in sha512 sha256 sha1 md5; do
	        ssl-cert-$i $1
        done
}

ssl-cert-info() {
        openssl x509 -noout -text -in $1
        ssl-cert-fingerprints $1
}

### Set ###
alias   setvi='export EDITOR=vi VISUAL=vi'
alias   setvim='export EDITOR=vim VISUAL=vim'
alias   setzile='export EDITOR=zile VISUAL=zile'
alias   setemacs='export EDITOR="emacsclient -a emacs" VISUAL="emacsclient -a emacs"'
#alias   edit='$EDITOR'
alias   vt100='export TERM=vt100'

### Package Management ###
alias aptitude-just-recommended='aptitude -o "Aptitude::Pkg-Display-Limit=!?reverse-depends(~i) ( ?reverse-recommends(~i) | ?reverse-suggests(~i) ) !?reverse-recommends(^abe-) !?reverse-suggests(^abe-) ~M !?essential"'
alias aptitude-also-via-dependency='aptitude -o "Aptitude::Pkg-Display-Limit=~i !~M ( ?reverse-depends(~i) | ?reverse-recommends(~i) | ?reverse-suggests(~i) ) !?essential"'
alias aptitude-review-unmarkauto-libraries='aptitude -o "Aptitude::Pkg-Display-Limit=( ^lib !-dev$ !-dbg$ !-utils$ !-tools$ !-bin$ !-doc$ !^libreoffice | -data$ | -common$ | -base$ !^r-base ) !~M"'
alias aptitude-upgradable-to-experimental='aptitude -o "Aptitude::Pkg-Display-Limit=~i ?narrow(!~VCURRENT, ~Aexperimental)"'

### BTS ###
alias btsmutt='bts --mbox show'

### Gags ###
#alias	y='echo "Hallo, sind wir noch wach, oder sind wir wieder auf die Y-Taste gefallen? ;-)"'

# Teppfihler
alias	amek=make
alias	nls=nsl
#alias	sl=ls
alias	les=less
alias	lesss=less

### Laden weiterer Aliasse

#alias	xal='source ~/.Xalias'

#if ( -f $home/.alias.mtools ) then
#  source $home/.alias.mtools
#endif
#if ( -f $home/.alias.wapua ) then
#  source $home/.alias.wapua
#endif


# Idea from Sven's zsh Book (and yeah I overwrite the previous reload
# function which reloaded the zshrc.
start stop restart reload force-reload() {
    sudo invoke-rc.d $1 $0
}

# From http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=299228
apt-rbdepends () {
    grep-dctrl -F Build-Depends "$1" -s Package /var/lib/apt/lists/*_Sources \
	| sort -u
}
